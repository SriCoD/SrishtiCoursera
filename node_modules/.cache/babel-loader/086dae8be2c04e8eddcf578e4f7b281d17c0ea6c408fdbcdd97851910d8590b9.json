{"ast":null,"code":"import _objectSpread from\"C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{toast}from\"react-hot-toast\";import{setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{settingsEndpoints}from\"../apis\";import{logout}from\"./authAPI\";var UPDATE_DISPLAY_PICTURE_API=settingsEndpoints.UPDATE_DISPLAY_PICTURE_API,UPDATE_PROFILE_API=settingsEndpoints.UPDATE_PROFILE_API,CHANGE_PASSWORD_API=settingsEndpoints.CHANGE_PASSWORD_API,DELETE_PROFILE_API=settingsEndpoints.DELETE_PROFILE_API;export function updateDisplayPicture(token,formData){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var toastId,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:toastId=toast.loading(\"Loading...\");_context.prev=1;_context.next=4;return apiConnector(\"PUT\",UPDATE_DISPLAY_PICTURE_API,formData,{\"Content-Type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(token)});case 4:response=_context.sent;console.log(\"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",response);if(response.data.success){_context.next=8;break;}throw new Error(response.data.message);case 8:toast.success(\"Display Picture Updated Successfully\");dispatch(setUser(response.data.data));_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\",_context.t0);toast.error(\"Could Not Update Display Picture\");case 16:toast.dismiss(toastId);case 17:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();}export function updateProfile(token,formData){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var toastId,response,userImage;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:toastId=toast.loading(\"Loading...\");_context2.prev=1;_context2.next=4;return apiConnector(\"PUT\",UPDATE_PROFILE_API,formData,{Authorization:\"Bearer \".concat(token)});case 4:response=_context2.sent;console.log(\"UPDATE_PROFILE_API API RESPONSE............\",response);if(response.data.success){_context2.next=8;break;}throw new Error(response.data.message);case 8:userImage=response.data.updatedUserDetails.image?response.data.updatedUserDetails.image:\"https://api.dicebear.com/5.x/initials/svg?seed=\".concat(response.data.updatedUserDetails.firstName,\" \").concat(response.data.updatedUserDetails.lastName);dispatch(setUser(_objectSpread(_objectSpread({},response.data.updatedUserDetails),{},{image:userImage})));toast.success(\"Profile Updated Successfully\");_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);console.log(\"UPDATE_PROFILE_API API ERROR............\",_context2.t0);toast.error(\"Could Not Update Profile\");case 17:toast.dismiss(toastId);case 18:case\"end\":return _context2.stop();}},_callee2,null,[[1,13]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();}export function changePassword(_x3,_x4){return _changePassword.apply(this,arguments);}function _changePassword(){_changePassword=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(token,formData){var toastId,response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:toastId=toast.loading(\"Loading...\");_context4.prev=1;_context4.next=4;return apiConnector(\"POST\",CHANGE_PASSWORD_API,formData,{Authorization:\"Bearer \".concat(token)});case 4:response=_context4.sent;console.log(\"CHANGE_PASSWORD_API API RESPONSE............\",response);if(response.data.success){_context4.next=8;break;}throw new Error(response.data.message);case 8:toast.success(\"Password Changed Successfully\");_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);console.log(\"CHANGE_PASSWORD_API API ERROR............\",_context4.t0);toast.error(_context4.t0.response.data.message);case 15:toast.dismiss(toastId);case 16:case\"end\":return _context4.stop();}},_callee4,null,[[1,11]]);}));return _changePassword.apply(this,arguments);}export function deleteProfile(token,navigate){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var toastId,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:toastId=toast.loading(\"Loading...\");_context3.prev=1;_context3.next=4;return apiConnector(\"DELETE\",DELETE_PROFILE_API,null,{Authorization:\"Bearer \".concat(token)});case 4:response=_context3.sent;console.log(\"DELETE_PROFILE_API API RESPONSE............\",response);if(response.data.success){_context3.next=8;break;}throw new Error(response.data.message);case 8:toast.success(\"Profile Deleted Successfully\");dispatch(logout(navigate));_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);console.log(\"DELETE_PROFILE_API API ERROR............\",_context3.t0);toast.error(\"Could Not Delete Profile\");case 16:toast.dismiss(toastId);case 17:case\"end\":return _context3.stop();}},_callee3,null,[[1,12]]);}));return function(_x5){return _ref3.apply(this,arguments);};}();}","map":{"version":3,"names":["toast","setUser","apiConnector","settingsEndpoints","logout","UPDATE_DISPLAY_PICTURE_API","UPDATE_PROFILE_API","CHANGE_PASSWORD_API","DELETE_PROFILE_API","updateDisplayPicture","token","formData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","toastId","response","wrap","_callee$","_context","prev","next","loading","Authorization","concat","sent","console","log","data","success","Error","message","t0","error","dismiss","stop","_x","apply","arguments","updateProfile","_ref2","_callee2","userImage","_callee2$","_context2","updatedUserDetails","image","firstName","lastName","_objectSpread","_x2","changePassword","_x3","_x4","_changePassword","_callee4","_callee4$","_context4","deleteProfile","navigate","_ref3","_callee3","_callee3$","_context3","_x5"],"sources":["C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/src/services/operations/SettingsAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\r\n\r\nimport { setUser } from \"../../slices/profileSlice\"\r\nimport { apiConnector } from \"../apiconnector\"\r\nimport { settingsEndpoints } from \"../apis\"\r\nimport { logout } from \"./authAPI\"\r\n\r\nconst {\r\n  UPDATE_DISPLAY_PICTURE_API,\r\n  UPDATE_PROFILE_API,\r\n  CHANGE_PASSWORD_API,\r\n  DELETE_PROFILE_API,\r\n} = settingsEndpoints\r\n\r\nexport function updateDisplayPicture(token, formData) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    try {\r\n      const response = await apiConnector(\r\n        \"PUT\",\r\n        UPDATE_DISPLAY_PICTURE_API,\r\n        formData,\r\n        {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      )\r\n      console.log(\r\n        \"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",\r\n        response\r\n      )\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      toast.success(\"Display Picture Updated Successfully\")\r\n      dispatch(setUser(response.data.data))\r\n    } catch (error) {\r\n      console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\", error)\r\n      toast.error(\"Could Not Update Display Picture\")\r\n    }\r\n    toast.dismiss(toastId)\r\n  }\r\n}\r\n\r\nexport function updateProfile(token, formData) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    try {\r\n      const response = await apiConnector(\"PUT\", UPDATE_PROFILE_API, formData, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      console.log(\"UPDATE_PROFILE_API API RESPONSE............\", response)\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      const userImage = response.data.updatedUserDetails.image\r\n        ? response.data.updatedUserDetails.image\r\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.updatedUserDetails.firstName} ${response.data.updatedUserDetails.lastName}`\r\n      dispatch(\r\n        setUser({ ...response.data.updatedUserDetails, image: userImage })\r\n      )\r\n      toast.success(\"Profile Updated Successfully\")\r\n    } catch (error) {\r\n      console.log(\"UPDATE_PROFILE_API API ERROR............\", error)\r\n      toast.error(\"Could Not Update Profile\")\r\n    }\r\n    toast.dismiss(toastId)\r\n  }\r\n}\r\n\r\nexport async function changePassword(token, formData) {\r\n  const toastId = toast.loading(\"Loading...\")\r\n  try {\r\n    const response = await apiConnector(\"POST\", CHANGE_PASSWORD_API, formData, {\r\n      Authorization: `Bearer ${token}`,\r\n    })\r\n    console.log(\"CHANGE_PASSWORD_API API RESPONSE............\", response)\r\n\r\n    if (!response.data.success) {\r\n      throw new Error(response.data.message)\r\n    }\r\n    toast.success(\"Password Changed Successfully\")\r\n  } catch (error) {\r\n    console.log(\"CHANGE_PASSWORD_API API ERROR............\", error)\r\n    toast.error(error.response.data.message)\r\n  }\r\n  toast.dismiss(toastId)\r\n}\r\n\r\nexport function deleteProfile(token, navigate) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    try {\r\n      const response = await apiConnector(\"DELETE\", DELETE_PROFILE_API, null, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      console.log(\"DELETE_PROFILE_API API RESPONSE............\", response)\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      toast.success(\"Profile Deleted Successfully\")\r\n      dispatch(logout(navigate))\r\n    } catch (error) {\r\n      console.log(\"DELETE_PROFILE_API API ERROR............\", error)\r\n      toast.error(\"Could Not Delete Profile\")\r\n    }\r\n    toast.dismiss(toastId)\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}