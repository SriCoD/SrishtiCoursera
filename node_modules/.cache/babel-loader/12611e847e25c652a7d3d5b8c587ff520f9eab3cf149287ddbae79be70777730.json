{"ast":null,"code":"import{toast}from\"react-hot-toast\";import{setLoading,setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{profileEndpoints}from\"../apis\";import{logout}from\"./authAPI\";const{GET_USER_DETAILS_API,GET_USER_ENROLLED_COURSES_API,GET_INSTRUCTOR_DATA_API}=profileEndpoints;export function getUserDetails(token,navigate){return async dispatch=>{const toastId=toast.loading(\"Loading...\");dispatch(setLoading(true));try{const response=await apiConnector(\"GET\",GET_USER_DETAILS_API,null,{Authorization:\"Bearer \".concat(token)});console.log(\"GET_USER_DETAILS API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}const userImage=response.data.data.image?response.data.data.image:\"https://api.dicebear.com/5.x/initials/svg?seed=\".concat(response.data.data.firstName,\" \").concat(response.data.data.lastName);dispatch(setUser({...response.data.data,image:userImage}));}catch(error){dispatch(logout(navigate));console.log(\"GET_USER_DETAILS API ERROR............\",error);toast.error(\"Could Not Get User Details\");}toast.dismiss(toastId);dispatch(setLoading(false));};}export async function getUserEnrolledCourses(token){const toastId=toast.loading(\"Loading...\");let result=[];try{console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");const response=await apiConnector(\"GET\",GET_USER_ENROLLED_COURSES_API,null,{Authorization:\"Bearer \".concat(token)});console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");// console.log(\n//   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n//   response\n// )\nif(!response.data.success){throw new Error(response.data.message);}result=response.data.data;}catch(error){console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\",error);toast.error(\"Could Not Get Enrolled Courses\");}toast.dismiss(toastId);return result;}export async function getInstructorData(token){const toastId=toast.loading(\"Loading...\");let result=[];try{var _response$data;const response=await apiConnector(\"GET\",GET_INSTRUCTOR_DATA_API,null,{Authorization:\"Bearer \".concat(token)});console.log(\"GET_INSTRUCTOR_API_RESPONSE\",response);result=response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.courses;}catch(error){console.log(\"GET_INSTRUCTOR_API ERROR\",error);toast.error(\"Could not Get Instructor Data\");}toast.dismiss(toastId);return result;}","map":{"version":3,"names":["toast","setLoading","setUser","apiConnector","profileEndpoints","logout","GET_USER_DETAILS_API","GET_USER_ENROLLED_COURSES_API","GET_INSTRUCTOR_DATA_API","getUserDetails","token","navigate","dispatch","toastId","loading","response","Authorization","concat","console","log","data","success","Error","message","userImage","image","firstName","lastName","error","dismiss","getUserEnrolledCourses","result","getInstructorData","_response$data","courses"],"sources":["C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/src/services/operations/profileAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\r\n\r\nimport { setLoading, setUser } from \"../../slices/profileSlice\"\r\nimport { apiConnector } from \"../apiconnector\"\r\nimport { profileEndpoints } from \"../apis\"\r\nimport { logout } from \"./authAPI\"\r\n\r\nconst { GET_USER_DETAILS_API, GET_USER_ENROLLED_COURSES_API, GET_INSTRUCTOR_DATA_API } = profileEndpoints\r\n\r\nexport function getUserDetails(token, navigate) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    dispatch(setLoading(true))\r\n    try {\r\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      console.log(\"GET_USER_DETAILS API RESPONSE............\", response)\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      const userImage = response.data.data.image\r\n        ? response.data.data.image\r\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.data.firstName} ${response.data.data.lastName}`\r\n      dispatch(setUser({ ...response.data.data, image: userImage }))\r\n    } catch (error) {\r\n      dispatch(logout(navigate))\r\n      console.log(\"GET_USER_DETAILS API ERROR............\", error)\r\n      toast.error(\"Could Not Get User Details\")\r\n    }\r\n    toast.dismiss(toastId)\r\n    dispatch(setLoading(false))\r\n  }\r\n}\r\n\r\nexport async function getUserEnrolledCourses(token) {\r\n  const toastId = toast.loading(\"Loading...\")\r\n  let result = []\r\n  try {\r\n    console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\r\n    const response = await apiConnector(\r\n      \"GET\",\r\n      GET_USER_ENROLLED_COURSES_API,\r\n      null,\r\n      {\r\n        Authorization: `Bearer ${token}`,\r\n      }\r\n    )\r\n    console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");\r\n    // console.log(\r\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\r\n    //   response\r\n    // )\r\n\r\n    if (!response.data.success) {\r\n      throw new Error(response.data.message)\r\n    }\r\n    result = response.data.data\r\n  } catch (error) {\r\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error)\r\n    toast.error(\"Could Not Get Enrolled Courses\")\r\n  }\r\n  toast.dismiss(toastId)\r\n  return result\r\n}\r\n\r\nexport async function getInstructorData(token) {\r\n  const toastId = toast.loading(\"Loading...\");\r\n  let result = [];\r\n  try{\r\n    const response = await apiConnector(\"GET\", GET_INSTRUCTOR_DATA_API, null, \r\n    {\r\n      Authorization: `Bearer ${token}`,\r\n    })\r\n\r\n    console.log(\"GET_INSTRUCTOR_API_RESPONSE\", response);\r\n    result = response?.data?.courses\r\n\r\n  }\r\n  catch(error) {\r\n    console.log(\"GET_INSTRUCTOR_API ERROR\", error);\r\n    toast.error(\"Could not Get Instructor Data\")\r\n  }\r\n  toast.dismiss(toastId);\r\n  return result;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}