{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{toast}from\"react-hot-toast\";import{setLoading,setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{profileEndpoints}from\"../apis\";import{logout}from\"./authAPI\";var GET_USER_DETAILS_API=profileEndpoints.GET_USER_DETAILS_API,GET_USER_ENROLLED_COURSES_API=profileEndpoints.GET_USER_ENROLLED_COURSES_API,GET_INSTRUCTOR_DATA_API=profileEndpoints.GET_INSTRUCTOR_DATA_API;export function getUserDetails(token,navigate){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var toastId,response,userImage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:toastId=toast.loading(\"Loading...\");dispatch(setLoading(true));_context.prev=2;_context.next=5;return apiConnector(\"GET\",GET_USER_DETAILS_API,null,{Authorization:\"Bearer \".concat(token)});case 5:response=_context.sent;console.log(\"GET_USER_DETAILS API RESPONSE............\",response);if(response.data.success){_context.next=9;break;}throw new Error(response.data.message);case 9:userImage=response.data.data.image?response.data.data.image:\"https://api.dicebear.com/5.x/initials/svg?seed=\".concat(response.data.data.firstName,\" \").concat(response.data.data.lastName);dispatch(setUser(_objectSpread(_objectSpread({},response.data.data),{},{image:userImage})));_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);dispatch(logout(navigate));console.log(\"GET_USER_DETAILS API ERROR............\",_context.t0);toast.error(\"Could Not Get User Details\");case 18:toast.dismiss(toastId);dispatch(setLoading(false));case 20:case\"end\":return _context.stop();}},_callee,null,[[2,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();}export function getUserEnrolledCourses(_x2){return _getUserEnrolledCourses.apply(this,arguments);}function _getUserEnrolledCourses(){_getUserEnrolledCourses=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(token){var toastId,result,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:toastId=toast.loading(\"Loading...\");result=[];_context2.prev=2;console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");_context2.next=6;return apiConnector(\"GET\",GET_USER_ENROLLED_COURSES_API,null,{Authorization:\"Bearer \".concat(token)});case 6:response=_context2.sent;console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");// console.log(\n//   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n//   response\n// )\nif(response.data.success){_context2.next=10;break;}throw new Error(response.data.message);case 10:result=response.data.data;_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](2);console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\",_context2.t0);toast.error(\"Could Not Get Enrolled Courses\");case 17:toast.dismiss(toastId);return _context2.abrupt(\"return\",result);case 19:case\"end\":return _context2.stop();}},_callee2,null,[[2,13]]);}));return _getUserEnrolledCourses.apply(this,arguments);}export function getInstructorData(_x3){return _getInstructorData.apply(this,arguments);}function _getInstructorData(){_getInstructorData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(token){var toastId,result,_response$data,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:toastId=toast.loading(\"Loading...\");result=[];_context3.prev=2;_context3.next=5;return apiConnector(\"GET\",GET_INSTRUCTOR_DATA_API,null,{Authorization:\"Bearer \".concat(token)});case 5:response=_context3.sent;console.log(\"GET_INSTRUCTOR_API_RESPONSE\",response);result=response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.courses;_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);console.log(\"GET_INSTRUCTOR_API ERROR\",_context3.t0);toast.error(\"Could not Get Instructor Data\");case 14:toast.dismiss(toastId);return _context3.abrupt(\"return\",result);case 16:case\"end\":return _context3.stop();}},_callee3,null,[[2,10]]);}));return _getInstructorData.apply(this,arguments);}","map":{"version":3,"names":["toast","setLoading","setUser","apiConnector","profileEndpoints","logout","GET_USER_DETAILS_API","GET_USER_ENROLLED_COURSES_API","GET_INSTRUCTOR_DATA_API","getUserDetails","token","navigate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","toastId","response","userImage","wrap","_callee$","_context","prev","next","loading","Authorization","concat","sent","console","log","data","success","Error","message","image","firstName","lastName","_objectSpread","t0","error","dismiss","stop","_x","apply","arguments","getUserEnrolledCourses","_x2","_getUserEnrolledCourses","_callee2","result","_callee2$","_context2","abrupt","getInstructorData","_x3","_getInstructorData","_callee3","_response$data","_callee3$","_context3","courses"],"sources":["C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/src/services/operations/profileAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\r\n\r\nimport { setLoading, setUser } from \"../../slices/profileSlice\"\r\nimport { apiConnector } from \"../apiconnector\"\r\nimport { profileEndpoints } from \"../apis\"\r\nimport { logout } from \"./authAPI\"\r\n\r\nconst { GET_USER_DETAILS_API, GET_USER_ENROLLED_COURSES_API, GET_INSTRUCTOR_DATA_API } = profileEndpoints\r\n\r\nexport function getUserDetails(token, navigate) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    dispatch(setLoading(true))\r\n    try {\r\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      console.log(\"GET_USER_DETAILS API RESPONSE............\", response)\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      const userImage = response.data.data.image\r\n        ? response.data.data.image\r\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.data.firstName} ${response.data.data.lastName}`\r\n      dispatch(setUser({ ...response.data.data, image: userImage }))\r\n    } catch (error) {\r\n      dispatch(logout(navigate))\r\n      console.log(\"GET_USER_DETAILS API ERROR............\", error)\r\n      toast.error(\"Could Not Get User Details\")\r\n    }\r\n    toast.dismiss(toastId)\r\n    dispatch(setLoading(false))\r\n  }\r\n}\r\n\r\nexport async function getUserEnrolledCourses(token) {\r\n  const toastId = toast.loading(\"Loading...\")\r\n  let result = []\r\n  try {\r\n    console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\r\n    const response = await apiConnector(\r\n      \"GET\",\r\n      GET_USER_ENROLLED_COURSES_API,\r\n      null,\r\n      {\r\n        Authorization: `Bearer ${token}`,\r\n      }\r\n    )\r\n    console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");\r\n    // console.log(\r\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\r\n    //   response\r\n    // )\r\n\r\n    if (!response.data.success) {\r\n      throw new Error(response.data.message)\r\n    }\r\n    result = response.data.data\r\n  } catch (error) {\r\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error)\r\n    toast.error(\"Could Not Get Enrolled Courses\")\r\n  }\r\n  toast.dismiss(toastId)\r\n  return result\r\n}\r\n\r\nexport async function getInstructorData(token) {\r\n  const toastId = toast.loading(\"Loading...\");\r\n  let result = [];\r\n  try{\r\n    const response = await apiConnector(\"GET\", GET_INSTRUCTOR_DATA_API, null, \r\n    {\r\n      Authorization: `Bearer ${token}`,\r\n    })\r\n\r\n    console.log(\"GET_INSTRUCTOR_API_RESPONSE\", response);\r\n    result = response?.data?.courses\r\n\r\n  }\r\n  catch(error) {\r\n    console.log(\"GET_INSTRUCTOR_API ERROR\", error);\r\n    toast.error(\"Could not Get Instructor Data\")\r\n  }\r\n  toast.dismiss(toastId);\r\n  return result;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}