{"ast":null,"code":"import{useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{RxCross2}from\"react-icons/rx\";import ReactStars from\"react-rating-stars-component\";import{useSelector}from\"react-redux\";import{createRating}from\"../../../services/operations/courseDetailsAPI\";import IconBtn from\"../../common/IconBtn\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CourseReviewModal(_ref){let{setReviewModal}=_ref;const{user}=useSelector(state=>state.profile);const{token}=useSelector(state=>state.auth);const{courseEntireData}=useSelector(state=>state.viewCourse);const{register,handleSubmit,setValue,formState:{errors}}=useForm();useEffect(()=>{setValue(\"courseExperience\",\"\");setValue(\"courseRating\",0);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const ratingChanged=newRating=>{// console.log(newRating)\nsetValue(\"courseRating\",newRating);};const onSubmit=async data=>{await createRating({courseId:courseEntireData._id,rating:data.courseRating,review:data.courseExperience},token);setReviewModal(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-[1000] !mt-0 grid h-screen w-screen place-items-center overflow-auto bg-white bg-opacity-10 backdrop-blur-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"my-10 w-11/12 max-w-[700px] rounded-lg border border-richblack-400 bg-richblack-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between rounded-t-lg bg-richblack-700 p-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-semibold text-richblack-5\",children:\"Add Review\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReviewModal(false),children:/*#__PURE__*/_jsx(RxCross2,{className:\"text-2xl text-richblack-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:user===null||user===void 0?void 0:user.image,alt:(user===null||user===void 0?void 0:user.firstName)+\"profile\",className:\"aspect-square w-[50px] rounded-full object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-richblack-5\",children:[user===null||user===void 0?void 0:user.firstName,\" \",user===null||user===void 0?void 0:user.lastName]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-richblack-5\",children:\"Posting Publicly\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"mt-6 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(ReactStars,{count:5,onChange:ratingChanged,size:24,activeColor:\"#ffd700\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-11/12 flex-col space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-richblack-5\",htmlFor:\"courseExperience\",children:[\"Add Your Experience \",/*#__PURE__*/_jsx(\"sup\",{className:\"text-pink-200\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"courseExperience\",placeholder:\"Add Your Experience\",...register(\"courseExperience\",{required:true}),className:\"form-style resize-x-none min-h-[130px] w-full\"}),errors.courseExperience&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs tracking-wide text-pink-200\",children:\"Please Add Your Experience\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex w-11/12 justify-end gap-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReviewModal(false),className:\"flex cursor-pointer items-center gap-x-2 rounded-md bg-richblack-300 py-[8px] px-[20px] font-semibold text-richblack-900\",children:\"Cancel\"}),/*#__PURE__*/_jsx(IconBtn,{text:\"Save\"})]})]})]})]})});}","map":{"version":3,"names":["useEffect","useForm","RxCross2","ReactStars","useSelector","createRating","IconBtn","jsx","_jsx","jsxs","_jsxs","CourseReviewModal","_ref","setReviewModal","user","state","profile","token","auth","courseEntireData","viewCourse","register","handleSubmit","setValue","formState","errors","ratingChanged","newRating","onSubmit","data","courseId","_id","rating","courseRating","review","courseExperience","className","children","onClick","src","image","alt","firstName","lastName","count","onChange","size","activeColor","htmlFor","id","placeholder","required","text"],"sources":["C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/src/components/core/ViewCourse/CourseReviewModal.jsx"],"sourcesContent":["import { useEffect } from \"react\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { RxCross2 } from \"react-icons/rx\"\r\nimport ReactStars from \"react-rating-stars-component\"\r\nimport { useSelector } from \"react-redux\"\r\n\r\nimport { createRating } from \"../../../services/operations/courseDetailsAPI\"\r\nimport IconBtn from \"../../common/IconBtn\"\r\n\r\nexport default function CourseReviewModal({ setReviewModal }) {\r\n  const { user } = useSelector((state) => state.profile)\r\n  const { token } = useSelector((state) => state.auth)\r\n  const { courseEntireData } = useSelector((state) => state.viewCourse)\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setValue,\r\n    formState: { errors },\r\n  } = useForm()\r\n\r\n  useEffect(() => {\r\n    setValue(\"courseExperience\", \"\")\r\n    setValue(\"courseRating\", 0)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  const ratingChanged = (newRating) => {\r\n    // console.log(newRating)\r\n    setValue(\"courseRating\", newRating)\r\n  }\r\n\r\n  const onSubmit = async (data) => {\r\n    await createRating(\r\n      {\r\n        courseId: courseEntireData._id,\r\n        rating: data.courseRating,\r\n        review: data.courseExperience,\r\n      },\r\n      token\r\n    )\r\n    setReviewModal(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[1000] !mt-0 grid h-screen w-screen place-items-center overflow-auto bg-white bg-opacity-10 backdrop-blur-sm\">\r\n      <div className=\"my-10 w-11/12 max-w-[700px] rounded-lg border border-richblack-400 bg-richblack-800\">\r\n        {/* Modal Header */}\r\n        <div className=\"flex items-center justify-between rounded-t-lg bg-richblack-700 p-5\">\r\n          <p className=\"text-xl font-semibold text-richblack-5\">Add Review</p>\r\n          <button onClick={() => setReviewModal(false)}>\r\n            <RxCross2 className=\"text-2xl text-richblack-5\" />\r\n          </button>\r\n        </div>\r\n        {/* Modal Body */}\r\n        <div className=\"p-6\">\r\n          <div className=\"flex items-center justify-center gap-x-4\">\r\n            <img\r\n              src={user?.image}\r\n              alt={user?.firstName + \"profile\"}\r\n              className=\"aspect-square w-[50px] rounded-full object-cover\"\r\n            />\r\n            <div className=\"\">\r\n              <p className=\"font-semibold text-richblack-5\">\r\n                {user?.firstName} {user?.lastName}\r\n              </p>\r\n              <p className=\"text-sm text-richblack-5\">Posting Publicly</p>\r\n            </div>\r\n          </div>\r\n          <form\r\n            onSubmit={handleSubmit(onSubmit)}\r\n            className=\"mt-6 flex flex-col items-center\"\r\n          >\r\n            <ReactStars\r\n              count={5}\r\n              onChange={ratingChanged}\r\n              size={24}\r\n              activeColor=\"#ffd700\"\r\n            />\r\n            <div className=\"flex w-11/12 flex-col space-y-2\">\r\n              <label\r\n                className=\"text-sm text-richblack-5\"\r\n                htmlFor=\"courseExperience\"\r\n              >\r\n                Add Your Experience <sup className=\"text-pink-200\">*</sup>\r\n              </label>\r\n              <textarea\r\n                id=\"courseExperience\"\r\n                placeholder=\"Add Your Experience\"\r\n                {...register(\"courseExperience\", { required: true })}\r\n                className=\"form-style resize-x-none min-h-[130px] w-full\"\r\n              />\r\n              {errors.courseExperience && (\r\n                <span className=\"ml-2 text-xs tracking-wide text-pink-200\">\r\n                  Please Add Your Experience\r\n                </span>\r\n              )}\r\n            </div>\r\n            <div className=\"mt-6 flex w-11/12 justify-end gap-x-2\">\r\n              <button\r\n                onClick={() => setReviewModal(false)}\r\n                className={`flex cursor-pointer items-center gap-x-2 rounded-md bg-richblack-300 py-[8px] px-[20px] font-semibold text-richblack-900`}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <IconBtn text=\"Save\" />\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}