{"ast":null,"code":"import{toast}from\"react-hot-toast\";import{setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{settingsEndpoints}from\"../apis\";import{logout}from\"./authAPI\";const{UPDATE_DISPLAY_PICTURE_API,UPDATE_PROFILE_API,CHANGE_PASSWORD_API,DELETE_PROFILE_API}=settingsEndpoints;export function updateDisplayPicture(token,formData){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"PUT\",UPDATE_DISPLAY_PICTURE_API,formData,{\"Content-Type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(token)});console.log(\"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}toast.success(\"Display Picture Updated Successfully\");dispatch(setUser(response.data.data));}catch(error){console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\",error);toast.error(\"Could Not Update Display Picture\");}toast.dismiss(toastId);};}export function updateProfile(token,formData){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"PUT\",UPDATE_PROFILE_API,formData,{Authorization:\"Bearer \".concat(token)});console.log(\"UPDATE_PROFILE_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}const userImage=response.data.updatedUserDetails.image?response.data.updatedUserDetails.image:\"https://api.dicebear.com/5.x/initials/svg?seed=\".concat(response.data.updatedUserDetails.firstName,\" \").concat(response.data.updatedUserDetails.lastName);dispatch(setUser({...response.data.updatedUserDetails,image:userImage}));toast.success(\"Profile Updated Successfully\");}catch(error){console.log(\"UPDATE_PROFILE_API API ERROR............\",error);toast.error(\"Could Not Update Profile\");}toast.dismiss(toastId);};}export async function changePassword(token,formData){const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"POST\",CHANGE_PASSWORD_API,formData,{Authorization:\"Bearer \".concat(token)});console.log(\"CHANGE_PASSWORD_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}toast.success(\"Password Changed Successfully\");}catch(error){console.log(\"CHANGE_PASSWORD_API API ERROR............\",error);toast.error(error.response.data.message);}toast.dismiss(toastId);}export function deleteProfile(token,navigate){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"DELETE\",DELETE_PROFILE_API,null,{Authorization:\"Bearer \".concat(token)});console.log(\"DELETE_PROFILE_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}toast.success(\"Profile Deleted Successfully\");dispatch(logout(navigate));}catch(error){console.log(\"DELETE_PROFILE_API API ERROR............\",error);toast.error(\"Could Not Delete Profile\");}toast.dismiss(toastId);};}","map":{"version":3,"names":["toast","setUser","apiConnector","settingsEndpoints","logout","UPDATE_DISPLAY_PICTURE_API","UPDATE_PROFILE_API","CHANGE_PASSWORD_API","DELETE_PROFILE_API","updateDisplayPicture","token","formData","dispatch","toastId","loading","response","Authorization","concat","console","log","data","success","Error","message","error","dismiss","updateProfile","userImage","updatedUserDetails","image","firstName","lastName","changePassword","deleteProfile","navigate"],"sources":["C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/src/services/operations/SettingsAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\r\n\r\nimport { setUser } from \"../../slices/profileSlice\"\r\nimport { apiConnector } from \"../apiconnector\"\r\nimport { settingsEndpoints } from \"../apis\"\r\nimport { logout } from \"./authAPI\"\r\n\r\nconst {\r\n  UPDATE_DISPLAY_PICTURE_API,\r\n  UPDATE_PROFILE_API,\r\n  CHANGE_PASSWORD_API,\r\n  DELETE_PROFILE_API,\r\n} = settingsEndpoints\r\n\r\nexport function updateDisplayPicture(token, formData) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    try {\r\n      const response = await apiConnector(\r\n        \"PUT\",\r\n        UPDATE_DISPLAY_PICTURE_API,\r\n        formData,\r\n        {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      )\r\n      console.log(\r\n        \"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",\r\n        response\r\n      )\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      toast.success(\"Display Picture Updated Successfully\")\r\n      dispatch(setUser(response.data.data))\r\n    } catch (error) {\r\n      console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\", error)\r\n      toast.error(\"Could Not Update Display Picture\")\r\n    }\r\n    toast.dismiss(toastId)\r\n  }\r\n}\r\n\r\nexport function updateProfile(token, formData) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    try {\r\n      const response = await apiConnector(\"PUT\", UPDATE_PROFILE_API, formData, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      console.log(\"UPDATE_PROFILE_API API RESPONSE............\", response)\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      const userImage = response.data.updatedUserDetails.image\r\n        ? response.data.updatedUserDetails.image\r\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.updatedUserDetails.firstName} ${response.data.updatedUserDetails.lastName}`\r\n      dispatch(\r\n        setUser({ ...response.data.updatedUserDetails, image: userImage })\r\n      )\r\n      toast.success(\"Profile Updated Successfully\")\r\n    } catch (error) {\r\n      console.log(\"UPDATE_PROFILE_API API ERROR............\", error)\r\n      toast.error(\"Could Not Update Profile\")\r\n    }\r\n    toast.dismiss(toastId)\r\n  }\r\n}\r\n\r\nexport async function changePassword(token, formData) {\r\n  const toastId = toast.loading(\"Loading...\")\r\n  try {\r\n    const response = await apiConnector(\"POST\", CHANGE_PASSWORD_API, formData, {\r\n      Authorization: `Bearer ${token}`,\r\n    })\r\n    console.log(\"CHANGE_PASSWORD_API API RESPONSE............\", response)\r\n\r\n    if (!response.data.success) {\r\n      throw new Error(response.data.message)\r\n    }\r\n    toast.success(\"Password Changed Successfully\")\r\n  } catch (error) {\r\n    console.log(\"CHANGE_PASSWORD_API API ERROR............\", error)\r\n    toast.error(error.response.data.message)\r\n  }\r\n  toast.dismiss(toastId)\r\n}\r\n\r\nexport function deleteProfile(token, navigate) {\r\n  return async (dispatch) => {\r\n    const toastId = toast.loading(\"Loading...\")\r\n    try {\r\n      const response = await apiConnector(\"DELETE\", DELETE_PROFILE_API, null, {\r\n        Authorization: `Bearer ${token}`,\r\n      })\r\n      console.log(\"DELETE_PROFILE_API API RESPONSE............\", response)\r\n\r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message)\r\n      }\r\n      toast.success(\"Profile Deleted Successfully\")\r\n      dispatch(logout(navigate))\r\n    } catch (error) {\r\n      console.log(\"DELETE_PROFILE_API API ERROR............\", error)\r\n      toast.error(\"Could Not Delete Profile\")\r\n    }\r\n    toast.dismiss(toastId)\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}