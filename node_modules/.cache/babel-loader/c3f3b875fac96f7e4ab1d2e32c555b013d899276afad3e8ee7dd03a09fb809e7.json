{"ast":null,"code":"import{useDispatch,useSelector}from\"react-redux\";import{Table,Tbody,Td,Th,Thead,Tr}from\"react-super-responsive-table\";import{setCourse,setEditCourse}from\"../../../../slices/courseSlice\";import\"react-super-responsive-table/dist/SuperResponsiveTableStyle.css\";import{useState}from\"react\";import{FaCheck}from\"react-icons/fa\";import{FiEdit2}from\"react-icons/fi\";import{HiClock}from\"react-icons/hi\";import{RiDeleteBin6Line}from\"react-icons/ri\";import{useNavigate}from\"react-router-dom\";import{formatDate}from\"../../../../services/formatDate\";import{deleteCourse,fetchInstructorCourses}from\"../../../../services/operations/courseDetailsAPI\";import{COURSE_STATUS}from\"../../../../utils/constants\";import ConfirmationModal from\"../../../common/ConfirmationModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CoursesTable(_ref){let{courses,setCourses}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const{token}=useSelector(state=>state.auth);const[loading,setLoading]=useState(false);const[confirmationModal,setConfirmationModal]=useState(null);const TRUNCATE_LENGTH=30;const handleCourseDelete=async courseId=>{setLoading(true);await deleteCourse({courseId:courseId},token);const result=await fetchInstructorCourses(token);if(result){setCourses(result);}setConfirmationModal(null);setLoading(false);};// console.log(\"All Course \", courses)\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{className:\"rounded-xl border border-richblack-800 \",children:[/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{className:\"flex gap-x-10 rounded-t-md border-b border-b-richblack-800 px-6 py-2\",children:[/*#__PURE__*/_jsx(Th,{className:\"flex-1 text-left text-sm font-medium uppercase text-richblack-100\",children:\"Courses\"}),/*#__PURE__*/_jsx(Th,{className:\"text-left text-sm font-medium uppercase text-richblack-100\",children:\"Duration\"}),/*#__PURE__*/_jsx(Th,{className:\"text-left text-sm font-medium uppercase text-richblack-100\",children:\"Price\"}),/*#__PURE__*/_jsx(Th,{className:\"text-left text-sm font-medium uppercase text-richblack-100\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(Tbody,{children:(courses===null||courses===void 0?void 0:courses.length)===0?/*#__PURE__*/_jsx(Tr,{children:/*#__PURE__*/_jsx(Td,{className:\"py-10 text-center text-2xl font-medium text-richblack-100\",children:\"No courses found\"})}):courses===null||courses===void 0?void 0:courses.map(course=>/*#__PURE__*/_jsxs(Tr,{className:\"flex gap-x-10 border-b border-richblack-800 px-6 py-8\",children:[/*#__PURE__*/_jsxs(Td,{className:\"flex flex-1 gap-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:course===null||course===void 0?void 0:course.thumbnail,alt:course===null||course===void 0?void 0:course.courseName,className:\"h-[148px] w-[220px] rounded-lg object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-richblack-5\",children:course.courseName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-richblack-300\",children:course.courseDescription.split(\" \").length>TRUNCATE_LENGTH?course.courseDescription.split(\" \").slice(0,TRUNCATE_LENGTH).join(\" \")+\"...\":course.courseDescription}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[12px] text-white\",children:[\"Created: \",formatDate(course.createdAt)]}),course.status===COURSE_STATUS.DRAFT?/*#__PURE__*/_jsxs(\"p\",{className:\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-pink-100\",children:[/*#__PURE__*/_jsx(HiClock,{size:14}),\"Drafted\"]}):/*#__PURE__*/_jsxs(\"p\",{className:\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-yellow-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-3 w-3 items-center justify-center rounded-full bg-yellow-100 text-richblack-700\",children:/*#__PURE__*/_jsx(FaCheck,{size:8})}),\"Published\"]})]})]}),/*#__PURE__*/_jsx(Td,{className:\"text-sm font-medium text-richblack-100\",children:\"2hr 30min\"}),/*#__PURE__*/_jsxs(Td,{className:\"text-sm font-medium text-richblack-100\",children:[\"\\u20B9\",course.price]}),/*#__PURE__*/_jsxs(Td,{className:\"text-sm font-medium text-richblack-100 \",children:[/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:()=>{navigate(\"/dashboard/edit-course/\".concat(course._id));},title:\"Edit\",className:\"px-2 transition-all duration-200 hover:scale-110 hover:text-caribbeangreen-300\",children:/*#__PURE__*/_jsx(FiEdit2,{size:20})}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:()=>{setConfirmationModal({text1:\"Do you want to delete this course?\",text2:\"All the data related to this course will be deleted\",btn1Text:!loading?\"Delete\":\"Loading...  \",btn2Text:\"Cancel\",btn1Handler:!loading?()=>handleCourseDelete(course._id):()=>{},btn2Handler:!loading?()=>setConfirmationModal(null):()=>{}});},title:\"Delete\",className:\"px-1 transition-all duration-200 hover:scale-110 hover:text-[#ff0000]\",children:/*#__PURE__*/_jsx(RiDeleteBin6Line,{size:20})})]})]},course._id))})]}),confirmationModal&&/*#__PURE__*/_jsx(ConfirmationModal,{modalData:confirmationModal})]});}","map":{"version":3,"names":["useDispatch","useSelector","Table","Tbody","Td","Th","Thead","Tr","setCourse","setEditCourse","useState","FaCheck","FiEdit2","HiClock","RiDeleteBin6Line","useNavigate","formatDate","deleteCourse","fetchInstructorCourses","COURSE_STATUS","ConfirmationModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CoursesTable","_ref","courses","setCourses","dispatch","navigate","token","state","auth","loading","setLoading","confirmationModal","setConfirmationModal","TRUNCATE_LENGTH","handleCourseDelete","courseId","result","children","className","length","map","course","src","thumbnail","alt","courseName","courseDescription","split","slice","join","createdAt","status","DRAFT","size","price","disabled","onClick","concat","_id","title","text1","text2","btn1Text","btn2Text","btn1Handler","btn2Handler","modalData"],"sources":["C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/src/components/core/Dashboard/InstructorCourses/CoursesTable.jsx"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\"\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"react-super-responsive-table\"\r\n\r\nimport { setCourse, setEditCourse } from \"../../../../slices/courseSlice\"\r\nimport \"react-super-responsive-table/dist/SuperResponsiveTableStyle.css\"\r\nimport { useState } from \"react\"\r\nimport { FaCheck } from \"react-icons/fa\"\r\nimport { FiEdit2 } from \"react-icons/fi\"\r\nimport { HiClock } from \"react-icons/hi\"\r\nimport { RiDeleteBin6Line } from \"react-icons/ri\"\r\nimport { useNavigate } from \"react-router-dom\"\r\n\r\nimport { formatDate } from \"../../../../services/formatDate\"\r\nimport {\r\n  deleteCourse,\r\n  fetchInstructorCourses,\r\n} from \"../../../../services/operations/courseDetailsAPI\"\r\nimport { COURSE_STATUS } from \"../../../../utils/constants\"\r\nimport ConfirmationModal from \"../../../common/ConfirmationModal\"\r\n\r\nexport default function CoursesTable({ courses, setCourses }) {\r\n  const dispatch = useDispatch()\r\n  const navigate = useNavigate()\r\n  const { token } = useSelector((state) => state.auth)\r\n  const [loading, setLoading] = useState(false)\r\n  const [confirmationModal, setConfirmationModal] = useState(null)\r\n  const TRUNCATE_LENGTH = 30\r\n\r\n  const handleCourseDelete = async (courseId) => {\r\n    setLoading(true)\r\n    await deleteCourse({ courseId: courseId }, token)\r\n    const result = await fetchInstructorCourses(token)\r\n    if (result) {\r\n      setCourses(result)\r\n    }\r\n    setConfirmationModal(null)\r\n    setLoading(false)\r\n  }\r\n\r\n  // console.log(\"All Course \", courses)\r\n\r\n  return (\r\n    <>\r\n      <Table className=\"rounded-xl border border-richblack-800 \">\r\n        <Thead>\r\n          <Tr className=\"flex gap-x-10 rounded-t-md border-b border-b-richblack-800 px-6 py-2\">\r\n            <Th className=\"flex-1 text-left text-sm font-medium uppercase text-richblack-100\">\r\n              Courses\r\n            </Th>\r\n            <Th className=\"text-left text-sm font-medium uppercase text-richblack-100\">\r\n              Duration\r\n            </Th>\r\n            <Th className=\"text-left text-sm font-medium uppercase text-richblack-100\">\r\n              Price\r\n            </Th>\r\n            <Th className=\"text-left text-sm font-medium uppercase text-richblack-100\">\r\n              Actions\r\n            </Th>\r\n          </Tr>\r\n        </Thead>\r\n        <Tbody>\r\n          {courses?.length === 0 ? (\r\n            <Tr>\r\n              <Td className=\"py-10 text-center text-2xl font-medium text-richblack-100\">\r\n                No courses found\r\n                {/* TODO: Need to change this state */}\r\n              </Td>\r\n            </Tr>\r\n          ) : (\r\n            courses?.map((course) => (\r\n              <Tr\r\n                key={course._id}\r\n                className=\"flex gap-x-10 border-b border-richblack-800 px-6 py-8\"\r\n              >\r\n                <Td className=\"flex flex-1 gap-x-4\">\r\n                  <img\r\n                    src={course?.thumbnail}\r\n                    alt={course?.courseName}\r\n                    className=\"h-[148px] w-[220px] rounded-lg object-cover\"\r\n                  />\r\n                  <div className=\"flex flex-col justify-between\">\r\n                    <p className=\"text-lg font-semibold text-richblack-5\">\r\n                      {course.courseName}\r\n                    </p>\r\n                    <p className=\"text-xs text-richblack-300\">\r\n                      {course.courseDescription.split(\" \").length >\r\n                      TRUNCATE_LENGTH\r\n                        ? course.courseDescription\r\n                            .split(\" \")\r\n                            .slice(0, TRUNCATE_LENGTH)\r\n                            .join(\" \") + \"...\"\r\n                        : course.courseDescription}\r\n                    </p>\r\n                    <p className=\"text-[12px] text-white\">\r\n                      Created: {formatDate(course.createdAt)}\r\n                    </p>\r\n                    {course.status === COURSE_STATUS.DRAFT ? (\r\n                      <p className=\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-pink-100\">\r\n                        <HiClock size={14} />\r\n                        Drafted\r\n                      </p>\r\n                    ) : (\r\n                      <p className=\"flex w-fit flex-row items-center gap-2 rounded-full bg-richblack-700 px-2 py-[2px] text-[12px] font-medium text-yellow-100\">\r\n                        <div className=\"flex h-3 w-3 items-center justify-center rounded-full bg-yellow-100 text-richblack-700\">\r\n                          <FaCheck size={8} />\r\n                        </div>\r\n                        Published\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </Td>\r\n                <Td className=\"text-sm font-medium text-richblack-100\">\r\n                  2hr 30min\r\n                </Td>\r\n                <Td className=\"text-sm font-medium text-richblack-100\">\r\n                  â‚¹{course.price}\r\n                </Td>\r\n                <Td className=\"text-sm font-medium text-richblack-100 \">\r\n                  <button\r\n                    disabled={loading}\r\n                    onClick={() => {\r\n                      navigate(`/dashboard/edit-course/${course._id}`)\r\n                    }}\r\n                    title=\"Edit\"\r\n                    className=\"px-2 transition-all duration-200 hover:scale-110 hover:text-caribbeangreen-300\"\r\n                  >\r\n                    <FiEdit2 size={20} />\r\n                  </button>\r\n                  <button\r\n                    disabled={loading}\r\n                    onClick={() => {\r\n                      setConfirmationModal({\r\n                        text1: \"Do you want to delete this course?\",\r\n                        text2:\r\n                          \"All the data related to this course will be deleted\",\r\n                        btn1Text: !loading ? \"Delete\" : \"Loading...  \",\r\n                        btn2Text: \"Cancel\",\r\n                        btn1Handler: !loading\r\n                          ? () => handleCourseDelete(course._id)\r\n                          : () => {},\r\n                        btn2Handler: !loading\r\n                          ? () => setConfirmationModal(null)\r\n                          : () => {},\r\n                      })\r\n                    }}\r\n                    title=\"Delete\"\r\n                    className=\"px-1 transition-all duration-200 hover:scale-110 hover:text-[#ff0000]\"\r\n                  >\r\n                    <RiDeleteBin6Line size={20} />\r\n                  </button>\r\n                </Td>\r\n              </Tr>\r\n            ))\r\n          )}\r\n        </Tbody>\r\n      </Table>\r\n      {confirmationModal && <ConfirmationModal modalData={confirmationModal} />}\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}