{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import{useDropzone}from\"react-dropzone\";import{FiUploadCloud}from\"react-icons/fi\";import{useSelector}from\"react-redux\";import\"video-react/dist/video-react.css\";import{Player}from\"video-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Upload(_ref){let{name,label,register,setValue,errors,video=false,viewData=null,editData=null}=_ref;const{course}=useSelector(state=>state.course);const[selectedFile,setSelectedFile]=useState(null);const[previewSource,setPreviewSource]=useState(viewData?viewData:editData?editData:\"\");const inputRef=useRef(null);const onDrop=acceptedFiles=>{const file=acceptedFiles[0];if(file){previewFile(file);setSelectedFile(file);}};const{getRootProps,getInputProps,isDragActive}=useDropzone({accept:!video?{\"image/*\":[\".jpeg\",\".jpg\",\".png\"]}:{\"video/*\":[\".mp4\"]},onDrop});const previewFile=file=>{// console.log(file)\nconst reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=()=>{setPreviewSource(reader.result);};};useEffect(()=>{register(name,{required:true});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[register]);useEffect(()=>{setValue(name,selectedFile);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[selectedFile,setValue]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-richblack-5\",htmlFor:name,children:[label,\" \",!viewData&&/*#__PURE__*/_jsx(\"sup\",{className:\"text-pink-200\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(isDragActive?\"bg-richblack-600\":\"bg-richblack-700\",\" flex min-h-[250px] cursor-pointer items-center justify-center rounded-md border-2 border-dotted border-richblack-500\"),children:previewSource?/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-col p-6\",children:[!video?/*#__PURE__*/_jsx(\"img\",{src:previewSource,alt:\"Preview\",className:\"h-full w-full rounded-md object-cover\"}):/*#__PURE__*/_jsx(Player,{aspectRatio:\"16:9\",playsInline:true,src:previewSource}),!viewData&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setPreviewSource(\"\");setSelectedFile(null);setValue(name,null);},className:\"mt-3 text-richblack-400 underline\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-col items-center p-6\",...getRootProps(),children:[/*#__PURE__*/_jsx(\"input\",{...getInputProps(),ref:inputRef}),/*#__PURE__*/_jsx(\"div\",{className:\"grid aspect-square w-14 place-items-center rounded-full bg-pure-greys-800\",children:/*#__PURE__*/_jsx(FiUploadCloud,{className:\"text-2xl text-yellow-50\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 max-w-[200px] text-center text-sm text-richblack-200\",children:[\"Drag and drop an \",!video?\"image\":\"video\",\", or click to\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-yellow-50\",children:\"Browse\"}),\" a file\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-10 flex list-disc justify-between space-x-12 text-center  text-xs text-richblack-200\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Aspect ratio 16:9\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Recommended size 1024x576\"})]})]})}),errors[name]&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs tracking-wide text-pink-200\",children:[label,\" is required\"]})]});}","map":{"version":3,"names":["useEffect","useRef","useState","useDropzone","FiUploadCloud","useSelector","Player","jsx","_jsx","jsxs","_jsxs","Upload","_ref","name","label","register","setValue","errors","video","viewData","editData","course","state","selectedFile","setSelectedFile","previewSource","setPreviewSource","inputRef","onDrop","acceptedFiles","file","previewFile","getRootProps","getInputProps","isDragActive","accept","reader","FileReader","readAsDataURL","onloadend","result","required","className","children","htmlFor","concat","src","alt","aspectRatio","playsInline","type","onClick","ref"],"sources":["C:/Users/s/Desktop/StudyNotion-An-Online-Education-Platform/src/components/core/Dashboard/AddCourse/Upload.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\"\r\nimport { useDropzone } from \"react-dropzone\"\r\nimport { FiUploadCloud } from \"react-icons/fi\"\r\nimport { useSelector } from \"react-redux\"\r\n\r\nimport \"video-react/dist/video-react.css\"\r\nimport { Player } from \"video-react\"\r\n\r\nexport default function Upload({\r\n  name,\r\n  label,\r\n  register,\r\n  setValue,\r\n  errors,\r\n  video = false,\r\n  viewData = null,\r\n  editData = null,\r\n}) {\r\n  const { course } = useSelector((state) => state.course)\r\n  const [selectedFile, setSelectedFile] = useState(null)\r\n  const [previewSource, setPreviewSource] = useState(\r\n    viewData ? viewData : editData ? editData : \"\"\r\n  )\r\n  const inputRef = useRef(null)\r\n\r\n  const onDrop = (acceptedFiles) => {\r\n    const file = acceptedFiles[0]\r\n    if (file) {\r\n      previewFile(file)\r\n      setSelectedFile(file)\r\n    }\r\n  }\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    accept: !video\r\n      ? { \"image/*\": [\".jpeg\", \".jpg\", \".png\"] }\r\n      : { \"video/*\": [\".mp4\"] },\r\n    onDrop,\r\n  })\r\n\r\n  const previewFile = (file) => {\r\n    // console.log(file)\r\n    const reader = new FileReader()\r\n    reader.readAsDataURL(file)\r\n    reader.onloadend = () => {\r\n      setPreviewSource(reader.result)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    register(name, { required: true })\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [register])\r\n\r\n  useEffect(() => {\r\n    setValue(name, selectedFile)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedFile, setValue])\r\n\r\n  return (\r\n    <div className=\"flex flex-col space-y-2\">\r\n      <label className=\"text-sm text-richblack-5\" htmlFor={name}>\r\n        {label} {!viewData && <sup className=\"text-pink-200\">*</sup>}\r\n      </label>\r\n      <div\r\n        className={`${\r\n          isDragActive ? \"bg-richblack-600\" : \"bg-richblack-700\"\r\n        } flex min-h-[250px] cursor-pointer items-center justify-center rounded-md border-2 border-dotted border-richblack-500`}\r\n      >\r\n        {previewSource ? (\r\n          <div className=\"flex w-full flex-col p-6\">\r\n            {!video ? (\r\n              <img\r\n                src={previewSource}\r\n                alt=\"Preview\"\r\n                className=\"h-full w-full rounded-md object-cover\"\r\n              />\r\n            ) : (\r\n              <Player aspectRatio=\"16:9\" playsInline src={previewSource} />\r\n            )}\r\n            {!viewData && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setPreviewSource(\"\")\r\n                  setSelectedFile(null)\r\n                  setValue(name, null)\r\n                }}\r\n                className=\"mt-3 text-richblack-400 underline\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div\r\n            className=\"flex w-full flex-col items-center p-6\"\r\n            {...getRootProps()}\r\n          >\r\n            <input {...getInputProps()} ref={inputRef} />\r\n            <div className=\"grid aspect-square w-14 place-items-center rounded-full bg-pure-greys-800\">\r\n              <FiUploadCloud className=\"text-2xl text-yellow-50\" />\r\n            </div>\r\n            <p className=\"mt-2 max-w-[200px] text-center text-sm text-richblack-200\">\r\n              Drag and drop an {!video ? \"image\" : \"video\"}, or click to{\" \"}\r\n              <span className=\"font-semibold text-yellow-50\">Browse</span> a\r\n              file\r\n            </p>\r\n            <ul className=\"mt-10 flex list-disc justify-between space-x-12 text-center  text-xs text-richblack-200\">\r\n              <li>Aspect ratio 16:9</li>\r\n              <li>Recommended size 1024x576</li>\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {errors[name] && (\r\n        <span className=\"ml-2 text-xs tracking-wide text-pink-200\">\r\n          {label} is required\r\n        </span>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}